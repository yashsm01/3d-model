<div class="container-fluid">
    <canvas id="renderCanvas"></canvas>
  
    <!-- Settings Button -->
    <div class="settings-container">
      <button class="settings-btn" (click)="clickSettings();">
        <i class="fas fa-cog"></i>
      </button>
      <!-- Control Panel -->
      <div class="control-panel" *ngIf="settingsClicked">
        <!-- Play Mode -->
        <div class="control-group">
          <span>Play Mode</span>
          <label class="switch">
            <input type="checkbox" [(ngModel)]="isPlayMode" (change)="togglePlayMode()">
            <span class="slider round"></span>
          </label>
        </div>
        <!-- View Mode Toggle Button -->
        <div class="control-group">
          <span>View Mode</span>
          <label class="switch">
            <input type="checkbox" [(ngModel)]="isViewMode" (change)="toggleViewMode()">
            <span class="slider round"></span>
          </label>
        </div>
        <!-- Add Camera Position and Angle -->
        <div class="control-group">
          <button (click)="storeCurrentCameraPositionAndAngle()">
            <i class="fas fa-camera"></i>
          </button>
          <span>Camera Position</span>
        </div>
        <!-- Cursor Rotation Toggle -->
        <div class="control-group">
          <span>Cursor Rotation</span>
          <label class="switch">
            <input type="checkbox" [(ngModel)]="isCursorRotation" (change)="toggleCursorRotation()">
            <span class="slider round"></span>
          </label>
        </div>
        <!-- Camera Type -->
        <div class="control-group">
          <span>Camera Type</span>
          <label class="switch">
            <input type="checkbox" [(ngModel)]="isArcRotateCamera" (change)="toggleCameraType(isArcRotateCamera)">
            <span class="slider round"></span>
          </label>
        </div>
        <!-- Model Movement -->
        <div class="control-group">
          <span>Model Movement</span>
          <label class="switch">
            <input type="checkbox" [(ngModel)]="isModelMovementEnabled"
              (change)="toggleModelMovement(isModelMovementEnabled)">
            <span class="slider round"></span>
          </label>
        </div>
        <!-- Layout -->
        <div class="control-group">
          <span>Layout</span>
          <button (click)="exportModels()" class="export-btn">
            <i class="fas fa-file-export"></i>
          </button>
          <button (click)="importModels()" class="import-btn">
            <i class="fas fa-file-import"></i>
          </button>
        </div>
        <!-- Camera Positions -->
        <div class="control-group">
          <span>Positions</span>
          <button (click)="exportCameraPositions()" class="export-btn">
            <i class="fas fa-file-export"></i>
          </button>
          <button (click)="importCameraPositions()" class="import-btn">
            <i class="fas fa-file-import"></i>
          </button>
        </div>
      </div>
    </div>
  
    <!-- Box Dimensions Controls -->
    <div id="dimensionControls" class="info-box dimension-controls" [class.expanded]="isDimensionsExpanded"
      (mouseenter)="isDimensionsExpanded = true" (mouseleave)="isDimensionsExpanded = false" *ngIf="!isViewMode">
      <div class="dimension-header">
        <h3>Box Dimensions</h3>
        <i class="fas fa-chevron-down"></i>
      </div>
      <div class="dimension-content">
        <div class="slider-container">
          <label>Width: {{innerBoxSize.width}}</label>
          <input type="range" [min]="minDimensions.width" [max]="maxDimensions.width" [value]="innerBoxSize.width"
            (input)="updateDimension('width', $any($event.target).value)">
        </div>
        <div class="slider-container">
          <label>Height: {{innerBoxSize.height}}</label>
          <input type="range" [min]="minDimensions.height" [max]="maxDimensions.height" [value]="innerBoxSize.height"
            (input)="updateDimension('height', $any($event.target).value)">
        </div>
        <div class="slider-container">
          <label>Depth: {{innerBoxSize.depth}}</label>
          <input type="range" [min]="minDimensions.depth" [max]="maxDimensions.depth" [value]="innerBoxSize.depth"
            (input)="updateDimension('depth', $any($event.target).value)">
        </div>
      </div>
    </div>
  
    <!-- Camera Info -->
    <div id="cameraInfo" class="info-box" *ngIf="!isViewMode"></div>
  
    <!-- Model List -->
    <div id="modelList" class="info-box model-list" *ngIf="!isViewMode">
      <div class="list-header">
        <h3>Available Models</h3>
      </div>
      <ul class="simple-list">
        <li *ngFor="let model of availableModels">
          <button (click)="addModel(model.file, model.scale, model.position, model.url)">
            <i [class]="model.icon"></i>
            <span>{{ model.name }}</span>
          </button>
        </li>
      </ul>
    </div>
  
    <!-- Camera Controls -->
    <div id="cameraControls" class="camera-controls info-box" *ngIf="!isViewMode">
      <div class="control-grid">
        <button class="camera-btn zoom-in" title="Zoom In" (mousedown)="startCameraMove('zoomIn')"
          (mouseup)="stopCameraMove()" (mouseleave)="stopCameraMove()">
          <i class="fas fa-search-plus"></i>
        </button>
  
        <div class="orbit-controls">
          <button class="camera-btn" title="Rotate Left" (mousedown)="startCameraMove('left')"
            (mouseup)="stopCameraMove()" (mouseleave)="stopCameraMove()">
            <i class="fas fa-undo"></i>
          </button>
          <button class="camera-btn" title="Rotate Up" (mousedown)="startCameraMove('up')" (mouseup)="stopCameraMove()"
            (mouseleave)="stopCameraMove()">
            <i class="fas fa-chevron-up"></i>
          </button>
          <button class="camera-btn reset" title="Reset View">
            <i class="fas fa-dot-circle"></i>
          </button>
          <button class="camera-btn" title="Rotate Down" (mousedown)="startCameraMove('down')"
            (mouseup)="stopCameraMove()" (mouseleave)="stopCameraMove()">
            <i class="fas fa-chevron-down"></i>
          </button>
          <button class="camera-btn" title="Rotate Right" (mousedown)="startCameraMove('right')"
            (mouseup)="stopCameraMove()" (mouseleave)="stopCameraMove()">
            <i class="fas fa-redo"></i>
          </button>
        </div>
  
        <button class="camera-btn zoom-out" title="Zoom Out" (mousedown)="startCameraMove('zoomOut')"
          (mouseup)="stopCameraMove()" (mouseleave)="stopCameraMove()">
          <i class="fas fa-search-minus"></i>
        </button>
      </div>
    </div>
  
    <!-- Model Controls -->
    <div id="modelControls" class="info-box" *ngIf="!isViewMode">
      <h3>Model Controls</h3>
      <div class="control-group">
        <h4>Rotation</h4>
        <div class="btn-grid">
          <button (click)="rotateModel('x', 1.6)"><i class="fas fa-redo"></i> X+</button>
          <button (click)="rotateModel('x', -1.6)"><i class="fas fa-undo"></i> X-</button>
          <button (click)="rotateModel('y', 1.6)"><i class="fas fa-redo"></i> Y+</button>
          <button (click)="rotateModel('y', -1.6)"><i class="fas fa-undo"></i> Y-</button>
          <button (click)="rotateModel('z', 1.6)"><i class="fas fa-redo"></i> Z+</button>
          <button (click)="rotateModel('z', -1.6)"><i class="fas fa-undo"></i> Z-</button>
        </div>
      </div>
  
      <div class="control-group">
        <h4>Position</h4>
        <div class="btn-grid">
          <button (mousedown)="startMovePosition('x', 0.05)" (mouseup)="stopMovePosition()"
            (mouseleave)="stopMovePosition()">
            <i class="fas fa-arrow-right"></i> X+
          </button>
          <button (mousedown)="startMovePosition('x', -0.05)" (mouseup)="stopMovePosition()"
            (mouseleave)="stopMovePosition()">
            <i class="fas fa-arrow-left"></i> X-
          </button>
          <button (mousedown)="startMovePosition('y', 0.05)" (mouseup)="stopMovePosition()"
            (mouseleave)="stopMovePosition()">
            <i class="fas fa-arrow-up"></i> Y+
          </button>
          <button (mousedown)="startMovePosition('y', -0.05)" (mouseup)="stopMovePosition()"
            (mouseleave)="stopMovePosition()">
            <i class="fas fa-arrow-down"></i> Y-
          </button>
          <button (mousedown)="startMovePosition('z', 0.05)" (mouseup)="stopMovePosition()"
            (mouseleave)="stopMovePosition()">
            <i class="fas fa-long-arrow-alt-right"></i> Z+
          </button>
          <button (mousedown)="startMovePosition('z', -0.05)" (mouseup)="stopMovePosition()"
            (mouseleave)="stopMovePosition()">
            <i class="fas fa-long-arrow-alt-left"></i> Z-
          </button>
        </div>
      </div>
      <div class="control-group">
        <h4>Scaling</h4>
        <div class="btn-grid">
          <button (click)="scaleModel('x', 1.1)"><i class="fas fa-expand-arrows-alt"></i> X+</button>
          <button (click)="scaleModel('x', 0.9)"><i class="fas fa-compress-arrows-alt"></i> X-</button>
          <button (click)="scaleModel('y', 1.1)"><i class="fas fa-expand-arrows-alt"></i> Y+</button>
          <button (click)="scaleModel('y', 0.9)"><i class="fas fa-compress-arrows-alt"></i> Y-</button>
          <button (click)="scaleModel('z', 1.1)"><i class="fas fa-expand-arrows-alt"></i> Z+</button>
          <button (click)="scaleModel('z', 0.9)"><i class="fas fa-compress-arrows-alt"></i> Z-</button>
        </div>
      </div>
      <div class="control-group">
        <button class="btn btn-warning" (click)="deleteSelectedModel()">
          <i class="fas fa-trash"></i> Delete Model
        </button>
      </div>
    </div>
  
    <!-- Selected Models List -->
    <div id="selectedModels" class="info-box" *ngIf="!isViewMode">
      <h3>Selected Models</h3>
      <ul class="selected-models-list">
        <li *ngFor="let model of selectedModels" (click)="selectModelFromList(model)"
          [class.active]="model === selectedModel">
          <i class="fas fa-cube"></i> {{ model.name }}
          <button class="camera-btn zoom-in" title="Zoom In" (click)="selectModelFromListZoomIn(model)">
            <i class="fas fa-search-plus"></i>
          </button>
        </li>
      </ul>
    </div>
  </div>